(function(t){function e(e){for(var r,a,s=e[0],c=e[1],u=e[2],h=0,d=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/tsm-editor/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"13db":function(t,e,n){},"1ddd":function(t,e,n){},"22e5":function(t,e,n){"use strict";n("f797")},2652:function(t,e,n){"use strict";n("bd47")},"4a5b":function(t,e,n){},"50ef":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,i,o=n("2b0e"),a=n("a584"),s=n("353a"),c=n.n(s),u=n("3181"),l=n.n(u),h=(n("96cf"),n("1da1")),d=n("ade3"),f=n("2f62"),p=(n("d3b7"),n("8e73")),m=n.n(p),g=m()("lzw");function v(){var t=window.location.hash;return t&&t.length>1?g.decompress(t.substr(1)).then((function(t){return t.formula})):new Promise((function(t,e){return e(Error("Parse error"))}))}function b(t){return null===t||t.length<1?new Promise((function(t,e){return e(Error("Nothing to save"))})):g.compress({formula:t}).then((function(t){var e="#".concat(t);return e!==window.location.hash&&window.history.pushState(window.location.pathname,null,e),t}))}o["a"].use(f["a"]);var w="UpdatePriceString",y="UpdateCleanupFlag",C="UpdateSaveTimeout",O="UpdateDebugFlag",E="GetPriceString",R="SavePriceString",S=new f["a"].Store({state:{debug:!1,priceString:"check(first(Crafting, DBMarket, DBRegionMarketAvg), max(0.25 * avg(Crafting, DBMarket, DBRegionMarketAvg), 1.5 * VendorSell))",saveTimeout:null,cleanUpFlag:!0},getters:{priceString:function(t){return t.priceString},debug:function(t){return t.debug},cleanUpSyntax:function(t){return t.cleanUpFlag}},mutations:(r={},Object(d["a"])(r,w,(function(t,e){t.priceString=e})),Object(d["a"])(r,y,(function(t,e){t.cleanUpFlag=e})),Object(d["a"])(r,C,(function(t,e){t.saveTimeout=e})),Object(d["a"])(r,O,(function(t,e){t.debug=e})),r),actions:(i={},Object(d["a"])(i,E,(function(t){return Object(h["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,v().then((function(t){return n(w,t),t})).catch((function(){}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()})),Object(d["a"])(i,R,(function(t){return Object(h["a"])(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,r=t.state,r.saveTimeout&&(window.clearTimeout(r.saveTimeout),n(C,null),r.debug&&console.log("Canceling pending save.")),i=window.setTimeout((function(){void 0!==r.priceString&&(b(r.priceString).catch(console.log),r.debug&&console.log("Saved."))}),1e3),n(C,i);case 4:case"end":return e.stop()}}),e)})))()})),i)}),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("section",{staticClass:"panel",attrs:{id:"editor"}},[t._m(0),t._m(1),n("p",[t._v(" Paste your string below or just start typing to try it out! ")]),n("div",{staticClass:"editor-status right"},[n("Tooltip",{staticClass:"tooltip",attrs:{position:"bottom-left",text:"Reformats your string to make it more readable!"}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.cleanUpSyntax,expression:"cleanUpSyntax"}],staticClass:"check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.cleanUpSyntax)?t._i(t.cleanUpSyntax,null)>-1:t.cleanUpSyntax},on:{change:function(e){var n=t.cleanUpSyntax,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.cleanUpSyntax=n.concat([o])):a>-1&&(t.cleanUpSyntax=n.slice(0,a).concat(n.slice(a+1)))}else t.cleanUpSyntax=i}}}),n("span",{staticClass:"text"},[t._v("Beautify")])])])],1),n("Editor",{ref:"editor",attrs:{cleanUpSyntax:t.cleanUpSyntax},model:{value:t.priceString,callback:function(e){t.priceString=e},expression:"priceString"}})],1),n("section",{staticClass:"panel",attrs:{id:"reference"}},[n("h2",[t._v("Reference")]),n("CommandReference")],1),n("footer",[t._v(" Made with ❤️ by trenchy ")])])},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hero"},[n("h1",[t._v("TSM Price String Editor")]),n("p",[t._v("Custom Price Strings Made Easy and Beautiful")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v(" Hi goblin! This tool makes it easy to create new custom price strings for the "),n("a",{attrs:{target:"_new",href:"https://www.tradeskillmaster.com/"}},[t._v("TradeSkillMaster")]),t._v(" addon in World of Warcraft. It provides some syntax highlighting as well as autocomplete features to make writing new formulas easy and readable. ")])}],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-container"},[n("div",{staticClass:"editor",style:{height:t.containerHeight+"px"}},[n("Dropdown",{staticClass:"dropdown",attrs:{position:t.dropdownPosition,visible:t.dropdownIsVisible,results:t.dropdownCompletions},on:{change:t.onDropdownSelect},model:{value:t.dropdownSelection,callback:function(e){t.dropdownSelection=e},expression:"dropdownSelection"}}),n("EditorRender",{ref:"editor",staticClass:"editor-render"}),n("EditorEvent",{staticClass:"editor-event",attrs:{shouldReformat:t.cleanUpSyntax}})],1),n("div",{staticClass:"editor-status"},[n("Button",{attrs:{type:"xsmall link",icon:"clipboard",onClick:t.copyToClipboard}},[t._v(" Copy to Clipboard ")])],1)])},I=[],D=(n("99af"),new o["a"]),k=D,j={SET_EDITOR_STATE:"Editor.SetState",SET_EDITOR_COPY_TO_CLIPBOARD:"Editor.CopyToClipboard",EDITOR_INPUT:"Events.OnInput",EDITOR_SCROLLHEIGHT_CHANGED:"Editor.ScrollHeightChanged",EDITOR_CARET_CHANGED:"Editor.SelectionCaretChanged",EDITOR_KEYDOWN:"Editor.KeyDown",EDITOR_KEYUP:"Editor.KeyUp",EDITOR_CLICK:"Editor.OnClick",EDITOR_BLUR:"Editor.OnBlur"},P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Syntax",{attrs:{code:t.content}})],1)},A=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ide",domProps:{innerHTML:t._s(t.stylizedContent)}})},$=[],U=(n("7db0"),n("4160"),n("d81d"),n("b0c0"),n("159b"),n("4de4"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("d4ec")),B=n("bee2"),L=function(){function t(e,n,r){Object(U["a"])(this,t),this.name=e,this.args=n,this.definition=r}return Object(B["a"])(t,[{key:"getCompletion",value:function(){return"".concat(this.name,"(")}}]),t}(),M=function(){function t(e,n){Object(U["a"])(this,t),this.name=e,this.definition=n}return Object(B["a"])(t,[{key:"getCompletion",value:function(){return this.name}}]),t}(),H=[new M("SmartAvgBuy","Returns the average purchase price across your last purchases of the item"),new M("AuctioningOpMax","Returns the maximum price generated by the operations applied to your groups"),new M("AuctioningOpMin","Returns the minimum price generated by the operations applied to your groups"),new M("AuctioningOpNormal","Returns the normal price generated by the operations applied to your groups"),new M("AvgBuy","Returns the average buy price for all purchases for a particular item"),new M("AvgSell","Returns the average sell price for all sales for a particular item"),new M("Crafting","Returns the sum of the material prices of each individual item used to craft the recipe"),new M("DBHistorical","Returns the 60-day average of the DBMarket value for a particular item on your realm's Auction House"),new M("DBMarket","Returns the weighted 14-day average of the auctions listed for a particular item on your realm's Auction House"),new M("DBMinBuyout","Returns the lowest priced auction on your realm's Auction House"),new M("DBRegionHistorical","Returns the 60-day average of DBRegionMarketAvg for a particular item in your region"),new M("DBRegionMarketAvg","Returns the average of DBMarket across all the realms in your region for a particular item"),new M("DBRegionMinBuyoutAvg","Returns the average of DBMinBuyout across all the realms in your region for a particular item"),new M("DBRegionSaleAvg","Returns the average sale and purchase price for a particular item in your region"),new M("DBRegionSaleRate","Returns a decimal number that indicates the sale rate of a particular item averaged across all Auction Houses in your region"),new M("DBRegionSoldPerDay","Returns a decimal number indicating the volume of an item that is sold on average per Auction House per day in your region"),new M("Destroy","Returns the average value of the items you would receive by destroying it"),new M("ItemLevel","Returns an integer for the item's level"),new M("ItemQuality","Returns an integer for the item's quality"),new M("MatPrice","Returns the material price of a item"),new M("MaxBuy","Returns the maximum price you've purchased an item for in your accounting data"),new M("MaxSell","Returns the maximum price you've sold an item for in your accounting data"),new M("MinBuy","Returns the minimum price you've purchased an item for in your accounting data"),new M("MinSell","Returns the minimum price you've sold an item for in your accounting data"),new M("NumExpires","Returns an integer for the number of times an item has expired from the Auction House since the last time it was sold"),new M("NumInventory","Returns an integer indicating the number of an item you currently possess"),new M("RequiredLevel","Returns an integer for the item's required level"),new M("SaleRate","Returns a decimal number that shows your personal sale rate for a particular item"),new M("ShoppingOpMax","Returns the maximum shopping price from the shopping operation applied to your groups"),new M("SniperOpMax","Returns the maximum sniper price from the sniper operation applied to your groups"),new M("VendorBuy","Returns the cost of a particular item you can purchase from a vendor"),new M("VendorSell","Returns the value of a particular item when you sell it to a vendor")],K=[new L("min",["n.."],"Returns the numerical minimum of the prices in the list"),new L("max",["n.."],"Returns the numerical maximum of the prices in the list"),new L("first",["n.."],"Returns the first valid price in the list"),new L("avg",["n.."],"Returns the average of the prices in the list"),new L("check",["n","b","c"],"If the first parameter is greater than 0 return the second parameter, otherwise return the third parameter"),new L("convert",["variable"],"Returns the lowest cost conversion of the item being evaluated"),new L("ifgt",["a","b","x","y"],"Returns x if a is greater than b, otherwise it returns y"),new L("ifgte",["a","b","x","y"],"Returns x if a is greater than or equal to b, otherwise it returns y"),new L("iflt",["a","b","x","y"],"Returns x if a is less than b, otherwise it returns y"),new L("iflte",["a","b","x","y"],"Returns x if a is less than or equal to b, otherwise it returns y"),new L("ifeq",["a","b","x","y"],"Returns x if a is equal to b, otherwise it returns y"),new L("round",["x","y"],"Rounds x to the nearest multiple of y"),new L("roundup",["x","y"],"Rounds x up to the nearest multiple of y"),new L("rounddown",["x","y"],"Rounds x down to the nearest multiple of y")],F=[new M("[Item Link]","Reference an item by link"),new M("i:ID","Reference an item by ID")];function W(t){var e=new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"ig");return{functions:K.filter((function(t){return e.test(t.name)})),symbols:H.filter((function(t){return e.test(t.name)}))}}n("a15b"),n("466d");var G=/\s+/,V=/[0-9]/,Y=/[A-Za-z]/,q=/(-|\+|\/|%|\*|:)/,z=/(\(|\))/,X=/\[|\]/,J=/(,|\.)/,Q=/(g|s|c)/i,Z=function(){function t(e,n){Object(U["a"])(this,t),this.type=e,this.value=n}return Object(B["a"])(t,[{key:"toString",value:function(){return"T(".concat(this.type,", ").concat(this.value,")")}}]),t}();Object(d["a"])(Z,"WHITESPACE","whitespace"),Object(d["a"])(Z,"EXPRESSION","expression"),Object(d["a"])(Z,"PLUS","plus"),Object(d["a"])(Z,"MINUS","minus"),Object(d["a"])(Z,"MUL","mul"),Object(d["a"])(Z,"DIV","div"),Object(d["a"])(Z,"PERCENT","percent"),Object(d["a"])(Z,"COLON","colon"),Object(d["a"])(Z,"KWORD","keyword"),Object(d["a"])(Z,"ITEM","item"),Object(d["a"])(Z,"RPAR","rparen"),Object(d["a"])(Z,"LPAR","lparen"),Object(d["a"])(Z,"LBRACKET","lbracket"),Object(d["a"])(Z,"RBRACKET","rbracket"),Object(d["a"])(Z,"NUMBER","number"),Object(d["a"])(Z,"PUNC","punc"),Object(d["a"])(Z,"EOF","eof"),Object(d["a"])(Z,"DENOM","denom");var tt=function(){function t(e){Object(U["a"])(this,t),this.text=e,this.nothing="",this.currentPosition=0,this.currentToken=null}return Object(B["a"])(t,[{key:"rewind",value:function(){this.currentPosition=0,this.currentToken=null}},{key:"advance",value:function(){this.currentPosition+=1}},{key:"toTokenizedString",value:function(){var t=[],e=this.currentPosition,n=this.currentToken,r=null;do{r=this.getNextToken(),t.push(r)}while(r.type!==Z.EOF);return this.currentPosition=e,this.currentToken=n,t.map((function(t){return t.toString()})).join(", ")}},{key:"skipWhitespace",value:function(){while(this.currentCharacter.match(G))this.advance()}},{key:"getWhiteSpace",value:function(){var t="";while(this.currentCharacter&&this.currentCharacter.match(G))t+=this.currentCharacter,this.advance();return t}},{key:"getNumber",value:function(){var t="";while(this.currentCharacter&&(this.currentCharacter.match(V)||"."===this.currentCharacter))t+=this.currentCharacter,this.advance();return t}},{key:"getKeyword",value:function(){var t="";while(this.currentCharacter&&this.currentCharacter.match(Y))t+=this.currentCharacter,this.advance();return t}},{key:"getItem",value:function(){var t="";while(this.currentCharacter&&!this.currentCharacter.match(X))t+=this.currentCharacter,this.advance();return t}},{key:"getNextToken",value:function(){while(null!=this.currentCharacter){if(this.currentCharacter.match(G))return new Z(Z.WHITESPACE,this.getWhiteSpace());if(this.currentCharacter.match(z)){var t=this.currentCharacter;return this.advance(),new Z("("===t?Z.LPAR:Z.RPAR,t)}if(this.currentCharacter.match(X)){var e=this.currentCharacter;return this.advance(),new Z("["===e?Z.LBRACKET:Z.RBRACKET,e)}if(this.currentCharacter.match(J)){var n=this.currentCharacter;return this.advance(),new Z(Z.PUNC,n)}if(this.currentCharacter.match(Q)&&this.lastCharacter&&this.lastCharacter.match(V)){var r=this.currentCharacter;return this.advance(),new Z(Z.DENOM,r)}if(this.currentCharacter.match(V))return new Z(Z.NUMBER,this.getNumber());if(this.currentCharacter.match(Y))return new Z(Z.KWORD,this.getKeyword());if(this.currentCharacter.match(q)){var i=this.currentCharacter;switch(this.advance(),i){case"-":return new Z(Z.MINUS,i);case"+":return new Z(Z.PLUS,i);case"*":return new Z(Z.MUL,i);case"/":return new Z(Z.DIV,i);case"%":return new Z(Z.PERCENT,i);case":":return new Z(Z.COLON,i);default:break}}}return new Z(Z.EOF,null)}},{key:"currentCharacter",get:function(){return this.currentPosition>this.text.length-1?null:"".concat(this.text[this.currentPosition])}},{key:"lastCharacter",get:function(){return this.currentPosition>0&&this.currentPosition<this.text.length?"".concat(this.text[this.currentPosition-1]):null}}]),t}(),et=K.map((function(t){return t.name})),nt=H.map((function(t){return t.name})),rt={};function it(t){var e,n=function(t){return rt[t.toLowerCase()]||t},r=function(t){return t.value},i=function(t){return"".concat(t.value," ")},o=function(t){return" ".concat(t.value," ")},a=(e={},Object(d["a"])(e,Z.WHITESPACE,r),Object(d["a"])(e,Z.EXPRESSION,r),Object(d["a"])(e,Z.PLUS,o),Object(d["a"])(e,Z.MINUS,o),Object(d["a"])(e,Z.MUL,o),Object(d["a"])(e,Z.DIV,o),Object(d["a"])(e,Z.PERCENT,r),Object(d["a"])(e,Z.RBRACKET,r),Object(d["a"])(e,Z.LBRACKET,r),Object(d["a"])(e,Z.RPAR,r),Object(d["a"])(e,Z.LPAR,r),Object(d["a"])(e,Z.NUMBER,r),Object(d["a"])(e,Z.PUNC,i),Object(d["a"])(e,Z.COLON,r),Object(d["a"])(e,Z.ITEM,r),Object(d["a"])(e,Z.DENOM,r),Object(d["a"])(e,Z.KWORD,(function(t){return et.find((function(e){return e.toLowerCase()===t.value.toLowerCase()}))||nt.find((function(e){return e.toLowerCase()===t.value.toLowerCase()}))?n(t.value):t.value})),e),s=new tt(t),c=s.getNextToken(),u="";while(c.type!==Z.EOF)u+=a[c.type](c),c=s.getNextToken();return u}function ot(t){var e;if(0===t.length)return"";var n=(e={},Object(d["a"])(e,Z.WHITESPACE,(function(){return"whitespace"})),Object(d["a"])(e,Z.EXPRESSION,(function(){return"expression"})),Object(d["a"])(e,Z.PLUS,(function(){return"maths"})),Object(d["a"])(e,Z.MINUS,(function(){return"maths"})),Object(d["a"])(e,Z.MUL,(function(){return"maths"})),Object(d["a"])(e,Z.DIV,(function(){return"maths"})),Object(d["a"])(e,Z.PERCENT,(function(){return"percent"})),Object(d["a"])(e,Z.RBRACKET,(function(){return"brackets rbracket"})),Object(d["a"])(e,Z.LBRACKET,(function(){return"brackets lbracket"})),Object(d["a"])(e,Z.RPAR,(function(){return"parens rparen"})),Object(d["a"])(e,Z.LPAR,(function(){return"parens lparen"})),Object(d["a"])(e,Z.NUMBER,(function(){return"numeric"})),Object(d["a"])(e,Z.PUNC,(function(){return"punc"})),Object(d["a"])(e,Z.COLON,(function(){return"punc"})),Object(d["a"])(e,Z.ITEM,(function(){return"item"})),Object(d["a"])(e,Z.DENOM,(function(t){var e={g:"gold",s:"silver",c:"copper"};return"currency ".concat(e[t.value])})),Object(d["a"])(e,Z.KWORD,(function(t){return et.find((function(e){return e.toLowerCase()===t.value.toLowerCase()}))?"function":nt.find((function(e){return e.toLowerCase()===t.value.toLowerCase()}))?"symbol":""})),e),r=function(t){return'<span class="token '.concat(n[t.type](t),'">').concat(t.value,"</span>")},i=new tt(t),o=i.getNextToken(),a="";while(o.type!==Z.EOF){var s=i.getNextToken();o.type===Z.WHITESPACE?a+=o.value:o.type!==Z.DENOM&&(s.type===Z.DENOM?a+='<span class="token '.concat(n[s.type](s),'">').concat(r(o)).concat(s.value,"</span>"):a+=r(o)),o=s}return a}et.forEach((function(t){return rt[t.toLowerCase()]=t,null})),nt.forEach((function(t){return rt[t.toLowerCase()]=t,null}));var at={name:"Syntax",props:{code:String},computed:{stylizedContent:function(){return ot(this.code)}}},st=at,ct=(n("f98b"),n("2877")),ut=Object(ct["a"])(st,N,$,!1,null,"71b87976",null),lt=ut.exports,ht={name:"EditorRender",components:{Syntax:lt},data:function(){return{content:""}},mounted:function(){var t=this;k.$on(j.EDITOR_INPUT,(function(e){t.content=e}))}},dt=ht,ft=Object(ct["a"])(dt,P,A,!1,null,null,null),pt=ft.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"editor",attrs:{id:"editor-event",contenteditable:"true",spellcheck:"false"},on:{input:t.onInput,keydown:t.onKeyDown,keyup:t.onKeyUp,click:t.onClick,blur:t.onBlur,paste:t.onPaste}})},gt=[],vt=(n("fb6a"),function t(e,n){Object(U["a"])(this,t),this.x=e,this.y=n}),bt=function t(e,n,r,i){Object(U["a"])(this,t),this.x=e,this.y=n,this.width=r,this.height=i};function wt(){var t=window.getSelection();return t.getRangeAt(0)}function yt(t){try{var e=t.getRangeAt(0).cloneRange();if(e.getClientRects){e.collapse(!0);var n=e.getClientRects(),r=n.length>0?n[0]:null;if(r)return new bt(r.left,r.top,0,r.height)}}catch(i){}return new bt(0,0,0,0)}function Ct(){var t=yt(window.getSelection());return new vt(t.x,t.y+t.height)}function Ot(t){t.collapse(!0);var e=window.getSelection();e.removeAllRanges(),e.addRange(t)}function Et(t,e,n){return t.substring(0,n.startOffset)+e+t.substring(n.endOffset)}n("caad"),n("07ac"),n("2532");var Rt={UP:38,DOWN:40,LEFT:37,RIGHT:39,ESCAPE:27,ENTER:13,SHIFT:16,TAB:9};function St(t){return Object.values(Rt).filter((function(t){return t!==Rt.LEFT&&t!==Rt.RIGHT})).includes(t)}var Tt=Rt,_t={name:"EditorEvent",props:{shouldReformat:Boolean},data:function(){return{content:""}},mounted:function(){var t=this;k.$on(j.SET_EDITOR_STATE,(function(e){e.string&&(t.content=e.string,t.$refs.editor.innerText=e.string,k.$emit(j.EDITOR_INPUT,e.string)),e.caret&&t.$nextTick((function(){var n=document.createRange();n.setStart(t.$refs.editor.childNodes[0],e.caret.start),n.setEnd(t.$refs.editor.childNodes[0],e.caret.start+e.caret.length),Ot(n)}))})),k.$on(j.SET_EDITOR_COPY_TO_CLIPBOARD,(function(){var e=document.createRange();e.selectNodeContents(t.$refs.editor);var n=window.getSelection();n.removeAllRanges(),n.addRange(e),document.execCommand("copy")}))},methods:{onInput:function(t){this.content=t.target.innerText,k.$emit(j.EDITOR_SCROLLHEIGHT_CHANGED,t.target.scrollHeight),k.$emit(j.EDITOR_INPUT,t.target.innerText),this.$nextTick((function(){k.$emit(j.EDITOR_CARET_CHANGED,{position:Ct(),range:wt()})}))},onKeyDown:function(t){var e=St(t.keyCode);return k.$emit(j.EDITOR_KEYDOWN,{event:t,isControlKey:e}),e&&(t.preventDefault(),t.stopPropagation()),!e},onKeyUp:function(t){return k.$emit(j.EDITOR_KEYUP,{event:t,isControlKey:St(t.keyCode)}),!1},onPaste:function(t){t.preventDefault();var e=wt(),n=t.clipboardData.getData("text/plain").replace(/\n/g," ");!0===this.shouldReformat&&(n=it(n));var r=this.content.slice(0,e.startOffset)+n+this.content.slice(e.endOffset,this.content.length),i=e.startOffset+n.length;this.content=r,this.$refs.editor.innerText=r,k.$emit(j.EDITOR_SCROLLHEIGHT_CHANGED,t.target.scrollHeight),k.$emit(j.EDITOR_INPUT,r);var o=document.createRange();return o.setStart(this.$refs.editor.childNodes[0],i),o.setEnd(this.$refs.editor.childNodes[0],i),Ot(o),!1},onClick:function(t){return k.$emit(j.EDITOR_CLICK,t),!1},onBlur:function(t){return k.$emit(j.EDITOR_BLUR,t),!1}}},xt=_t,It=Object(ct["a"])(xt,mt,gt,!1,null,null,null),Dt=It.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown panel",style:t.positionCSS},[n("ul",[t._l(t.results.symbols,(function(e,r){return n("SymbolDropdown",{key:"symbol"+r,class:r===t.value?"selected":"",attrs:{item:e},nativeOn:{click:function(n){return t.onClickItem(e)},mouseover:function(e){return t.onHoverItem(r)}}})})),t._l(t.results.functions,(function(e,r){return n("FunctionDropdown",{key:"function"+r,class:r+t.results.symbols.length===t.value?"selected":"",attrs:{item:e},nativeOn:{click:function(n){return t.onClickItem(e)},mouseover:function(e){return t.onHoverItem(r+t.results.symbols.length)}}})}))],2),n("div",{staticClass:"hint"},[n("Icon",{attrs:{name:"bulb"}}),t._v(" Hit enter or tab to insert ")],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.debug,expression:"debug"}],staticClass:"debug-panel panel"},[n("div",[t._v("Active Option: "+t._s(t.selectedIndex))]),n("div",{staticClass:"position"},[t._v("Position: "+t._s(t.position.x)+", "+t._s(t.position.y))])])])},jt=[],Pt=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"dropdown-row panel"},[n("Syntax",{staticClass:"name",attrs:{code:t.item.name+"("+t.item.args.join(", ")+")"}}),n("Icon",{staticClass:"function",attrs:{name:"function"}}),n("p",{staticClass:"definition"},[t._v(" "+t._s(t.item.definition)+" ")])],1)}),At=[],Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{class:"icon "+t.name})},$t=[],Ut={name:"Icon",props:{name:{type:String,default:"nope"}}},Bt=Ut,Lt=(n("d7ee"),Object(ct["a"])(Bt,Nt,$t,!1,null,"3339b743",null)),Mt=Lt.exports,Ht={name:"FunctionDropdown",components:{Icon:Mt,Syntax:lt},props:{item:Object}},Kt=Ht,Ft=(n("f306"),Object(ct["a"])(Kt,Pt,At,!1,null,"4dd4e085",null)),Wt=Ft.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"dropdown-row panel"},[n("Icon",{staticClass:"symbol",attrs:{name:"symbol"}}),n("Syntax",{staticClass:"name",attrs:{code:t.item.name}}),n("p",{staticClass:"definition"},[t._v(" "+t._s(t.item.definition)+" ")])],1)},Vt=[],Yt={name:"SymbolDropdown",components:{Icon:Mt,Syntax:lt},props:{item:Object}},qt=Yt,zt=(n("681e"),Object(ct["a"])(qt,Gt,Vt,!1,null,"691b9926",null)),Xt=zt.exports,Jt=void 0,Qt={name:"Dropdown",components:{FunctionDropdown:Wt,SymbolDropdown:Xt,Icon:Mt},props:{visible:{type:Boolean,default:!1},position:{type:Object,default:function(){return new vt(0,0)}},value:Number,results:Object,debug:Boolean},data:function(){return{selectedIndex:{get:function(){return Jt.value},set:function(t){return Jt.onHoverItem(t)}}}},methods:{onClickItem:function(t){this.$emit("change",t)},onHoverItem:function(t){this.$emit("input",t)}},computed:{positionCSS:function(){var t=this.position.x;if(this.$el){var e=this.$el.getBoundingClientRect();t=Math.min(t,window.innerWidth-e.width)}return{position:"absolute",left:"".concat(t,"px"),top:"".concat(this.position.y,"px"),visibility:this.visible?"visible":"hidden"}}}},Zt=Qt,te=(n("6fb4"),Object(ct["a"])(Zt,kt,jt,!1,null,"24da2dea",null)),ee=te.exports,ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:"button "+t.type,on:{click:t.handleClick}},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:t.icon&&t.icon.length>0===!0,expression:"icon && icon.length > 0 === true"}],staticClass:"icon",attrs:{name:t.icon}}),n("span",{staticClass:"text"},[t._t("default")],2)],1)},re=[],ie={name:"Button",components:{Icon:Mt},props:{icon:String,onClick:Function,type:{type:String,default:"action normal"}},methods:{handleClick:function(t){this.onClick&&this.onClick(t)}}},oe=ie,ae=(n("9240"),Object(ct["a"])(oe,ne,re,!1,null,"17f669a7",null)),se=ae.exports;n("1276");function ce(t){return t.split(/[\s\(\)\{\}]+/)}var ue={name:"Editor",components:{EditorRender:pt,EditorEvent:Dt,Dropdown:ee,Button:se},props:{value:String,cleanUpSyntax:Boolean},data:function(){return{containerHeight:120,inputIsFromEditor:!1,dropdownSearchTerm:"",dropdownPosition:new vt(0,0),dropdownSelection:0,dropdownCompletions:{functions:[],symbols:[]},keyPressCount:0,currentCaretRange:null}},computed:{dropdownIsVisible:function(){return this.dropdownCompletions.functions.length>0||this.dropdownCompletions.symbols.length>0}},mounted:function(){k.$emit(j.SET_EDITOR_STATE,{string:this.value}),k.$on(j.EDITOR_SCROLLHEIGHT_CHANGED,this.onEditorScrollHeightChanged),k.$on(j.EDITOR_INPUT,this.onEditorInput),k.$on(j.EDITOR_CARET_CHANGED,this.onEditorCaretPositionChange),k.$on(j.EDITOR_KEYDOWN,this.onEditorKeyDown),k.$on(j.EDITOR_KEYUP,this.onEditorKeyUp),k.$on(j.EDITOR_BLUR,this.onEditorBlur)},watch:{value:function(t){this.inputIsFromEditor||k.$emit(j.SET_EDITOR_STATE,{string:t}),this.inputIsFromEditor=!1}},methods:{onEditorInput:function(t){this.inputIsFromEditor=!0,this.$emit("input",t)},onEditorScrollHeightChanged:function(t){this.containerHeight=t},onEditorKeyDown:function(t){var e=t.event,n=t.isControlKey;if(this.dropdownIsVisible&&n){switch(e.keyCode){case Tt.UP:this.keyPressCount-=1;break;case Tt.DOWN:this.keyPressCount+=1;break;case Tt.ESCAPE:this.dismissDropdown();break;case Tt.ENTER:case Tt.TAB:this.onDropdownSelect(this.dropdownCompletions.symbols.concat(this.dropdownCompletions.functions)[this.dropdownSelection]);break;default:break}var r=this.dropdownCompletions.functions.length+this.dropdownCompletions.symbols.length;this.dropdownSelection=(this.keyPressCount%r+r)%r}},onEditorKeyUp:function(t){var e=t.event;!this.dropdownIsVisible||e.keyCode!==Tt.LEFT&&e.keyCode!==Tt.RIGHT||this.dismissDropdown()},onEditorCaretPositionChange:function(t){var e=t.range,n=t.position;this.currentCaretRange=e;var r=this.value.substr(0,e.startOffset);if(r&&r.length>2){var i=ce(r);if(i.length>0&&i[i.length-1].length>1){var o=this.$el.getBoundingClientRect();this.dropdownSearchTerm=i[i.length-1],this.dropdownCompletions=W(this.dropdownSearchTerm),this.dropdownSelection=0,this.dropdownPosition=new vt(n.x-o.left,n.y-o.top)}}},onEditorBlur:function(){var t=this;setTimeout((function(){t.dismissDropdown()}),250)},dismissDropdown:function(){this.dropdownCompletions={functions:[],symbols:[]},this.dropdownSelection=0,this.keyPressCount=0},onDropdownSelect:function(t){var e=this,n=this.currentCaretRange.cloneRange();if(n){n.setStart(n.startContainer,Math.max(0,n.startOffset-this.dropdownSearchTerm.length));var r=n.startOffset,i=Et(this.value,t.getCompletion(),n);this.$nextTick((function(){k.$emit(j.SET_EDITOR_STATE,{string:i,caret:{start:r+t.getCompletion().length,length:0}}),e.dismissDropdown(),e.$gtag.event("editorEvent",{action:"dismissedDropdownWithSelection"})}))}},copyToClipboard:function(){this.$gtag.event("editorEvent",{action:"copyToClipboard"}),k.$emit(j.SET_EDITOR_COPY_TO_CLIPBOARD)}}},le=ue,he=(n("aae8"),Object(ct["a"])(le,x,I,!1,null,"f38d437a",null)),de=he.exports,fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reference"},[n("section",{staticClass:"functions"},[n("h3",[n("Icon",{attrs:{name:"function"}}),t._v(" Functions")],1),n("section",{staticClass:"sub-panel"},t._l(t.functions,(function(t,e){return n("FunctionReference",{key:"function"+e,staticClass:"row function-row",attrs:{item:t}})})),1)]),n("section",{staticClass:"symbols"},[n("h3",[n("Icon",{attrs:{name:"symbol"}}),t._v(" Variables")],1),n("section",{staticClass:"sub-panel"},[t._l(t.specialFeatures,(function(t,e){return n("SymbolReference",{key:"feat"+e,staticClass:"row symbol-row",attrs:{item:t}})})),t._l(t.symbols,(function(t,e){return n("SymbolReference",{key:"symbol"+e,staticClass:"row symbol-row",attrs:{item:t}})}))],2)])])},pe=[],me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Syntax",{staticClass:"name",attrs:{code:t.item.name+"("+t.item.args.join(", ")+")"}}),n("p",{staticClass:"definition"},[t._v(" "+t._s(t.item.definition)+" ")])],1)},ge=[],ve={name:"FunctionReference",components:{Syntax:lt},props:{item:Object}},be=ve,we=(n("7612"),Object(ct["a"])(be,me,ge,!1,null,"2a2b2bcd",null)),ye=we.exports,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Syntax",{staticClass:"name",attrs:{code:t.item.name}}),n("p",{staticClass:"definition"},[t._v(" "+t._s(t.item.definition)+" ")])],1)},Oe=[],Ee={name:"SymbolReference",components:{Syntax:lt},props:{item:Object}},Re=Ee,Se=(n("22e5"),Object(ct["a"])(Re,Ce,Oe,!1,null,"670e7aa6",null)),Te=Se.exports,_e={name:"CommandReference",components:{FunctionReference:ye,SymbolReference:Te,Icon:Mt},data:function(){return{symbols:H,functions:K,specialFeatures:F}}},xe=_e,Ie=(n("bac8"),Object(ct["a"])(xe,fe,pe,!1,null,"95005592",null)),De=Ie.exports,ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"tooltip"},[t._t("default"),n("span",{class:"tooltip-text "+t.position},[t._v(t._s(t.text))])],2)},je=[],Pe={name:"Tooltip",props:{text:String,position:{type:String,default:"bottom-right"}}},Ae=Pe,Ne=(n("2652"),Object(ct["a"])(Ae,ke,je,!1,null,"313a0baa",null)),$e=Ne.exports,Ue={name:"app",components:{Editor:de,CommandReference:De,Tooltip:$e},computed:{priceString:{get:function(){return this.$store.getters.priceString},set:function(t){this.$store.commit(w,t),this.$store.dispatch(R,t)}},cleanUpSyntax:{get:function(){return this.$store.getters.cleanUpSyntax},set:function(t){this.$store.commit(y,t),this.$gtag.event("editorEvent",{action:"cleanupSyntax"})}}},mounted:function(){var t=this;this.$store.dispatch(E).then((function(e){t.$gtag.pageview({page_path:window.location.pathname+window.location.hash}),t.priceString=e}))}},Be=Ue,Le=(n("f0f3"),n("5c64"),Object(ct["a"])(Be,T,_,!1,null,"c7242d78",null)),Me=Le.exports,He=c()({apiKey:"16d836736f8f6e23169eb3ed2393a37f",appVersion:"1.4.3"});He.use(l.a,o["a"]),o["a"].use(a["a"],{config:{id:"UA-49351028-1"},enabled:!0}),o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(Me)},store:S}).$mount("#app")},"5c64":function(t,e,n){"use strict";n("d32a")},"681e":function(t,e,n){"use strict";n("aa0a")},"6fb4":function(t,e,n){"use strict";n("e634")},7612:function(t,e,n){"use strict";n("13db")},9240:function(t,e,n){"use strict";n("c2f9")},9645:function(t,e,n){},aa0a:function(t,e,n){},aae8:function(t,e,n){"use strict";n("9645")},b0de:function(t,e,n){},bac8:function(t,e,n){"use strict";n("50ef")},bd47:function(t,e,n){},c2f9:function(t,e,n){},d32a:function(t,e,n){},d7ee:function(t,e,n){"use strict";n("b0de")},dce5:function(t,e,n){},e634:function(t,e,n){},f0f3:function(t,e,n){"use strict";n("dce5")},f306:function(t,e,n){"use strict";n("4a5b")},f797:function(t,e,n){},f98b:function(t,e,n){"use strict";n("1ddd")}});
//# sourceMappingURL=app.a15a10f0.js.map